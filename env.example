# =============================================================================
# x402 Payment Middleware - Environment Configuration
# =============================================================================

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
DATABASE_URL="postgresql://x402_user:x402_password@localhost:5432/x402_middleware"
DATABASE_SSL="false"
DATABASE_MAX_CONNECTIONS="10"          # 最大接続数
DATABASE_CONNECTION_TIMEOUT="20000"    # 接続タイムアウト（20秒）

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
REDIS_URL="redis://localhost:6379"
REDIS_PASSWORD=""
REDIS_DB="0"

# -----------------------------------------------------------------------------
# x402 Payment Configuration
# -----------------------------------------------------------------------------
# Mode: 'facilitator' or 'self' 
X402_MODE="facilitator"
X402_NETWORK="base-sepolia"
X402_ASSET="USDC"
X402_CURRENCY="USDC"                    # 通貨名（X402_ASSETと同じ値）
X402_DECIMALS="6"                       # USDC小数点桁数
X402_AMOUNT="10000"                     # 支払い金額（0.01 USDC = 10000 microUSDC）
X402_CHAIN_ID="84532"                   # Base Sepolia Chain ID
RECEIVER_ADDRESS="0xF3A3a4c53BA845EC890391E588d94C73319DEFc6"               # 受信ウォレットアドレス
X402_RECEIVER_ADDRESS="0xF3A3a4c53BA845EC890391E588d94C73319DEFc6"          # 受信ウォレットアドレス（統一用）
X402_NONCE_EXPIRATION_MS="900000"      # nonce有効期限（15分）

# -----------------------------------------------------------------------------
# CDP Facilitator Configuration (when MODE=facilitator)
# -----------------------------------------------------------------------------
CDP_API_KEY="6941b3e4-99db-4a57-b5c2-d1d769fb01eb"
CDP_API_SECRET = +jRUS43CkTuI/ArSTSQWK2U6F6oax18QuPPBuNuW3nOlPTmIDzH1Q9Rbqm8wn+Y+Of02yp6twR9+Wf+dXuNrmg==
CDP_BASE_URL="https://api.coinbase.com/api/v2"
X402_FACILITATOR_API_KEY="6941b3e4-99db-4a57-b5c2-d1d769fb01eb"          # CDP API Key（統一用）
X402_FACILITATOR_API_URL="https://api.developer.coinbase.com"  # CDP Base URL（統一用）
X402_FACILITATOR_TIMEOUT="30000"       # API timeout（30秒）
X402_FACILITATOR_RETRY_ATTEMPTS="3"    # リトライ回数

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
PORT="3001"
NODE_ENV="development"
API_BASE_URL="http://localhost:3001"
CORS_ORIGIN="http://localhost:3000"    # Webクライアントのオリジン

# -----------------------------------------------------------------------------
# Security Configuration
# -----------------------------------------------------------------------------
JWT_SECRET="your-super-secret-jwt-key"
RATE_LIMIT_WINDOW_MS="900000"  # 15 minutes
RATE_LIMIT_MAX_REQUESTS="100"

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
LOG_LEVEL="info"
LOG_FORMAT="json"

# -----------------------------------------------------------------------------
# Web App Configuration
# -----------------------------------------------------------------------------
NEXT_PUBLIC_API_BASE_URL="http://localhost:3001"
NEXT_PUBLIC_CHAIN_ID="84532"  # Base Sepolia
NEXT_PUBLIC_WALLET_CONNECT_PROJECT_ID="ebb392b506dabf977a570651c7e04300"  # WalletConnect Project ID（要取得）
NEXT_PUBLIC_PAYMASTER_URL=""            # Smart Wallet Paymaster URL（オプション）
NEXT_PUBLIC_BUNDLER_URL=""              # Smart Wallet Bundler URL（オプション）

# -----------------------------------------------------------------------------
# x402 Middleware Behavior Configuration
# -----------------------------------------------------------------------------
X402_ENABLE_LOGGING="true"              # ログ出力の有効/無効
X402_SKIP_PATHS="/api/health,/api/status,/metrics"  # 支払い不要パス 